<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Expense Tracker with Budget Insights</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- Tailwind CSS CDN -->
        <script src="https://cdn.tailwindcss.com"></script>
    </head>
    <body
        class="bg-gradient-to-br from-blue-50 to-green-50 min-h-screen flex items-center justify-center"
    >
        <div
            class="bg-white shadow-2xl rounded-2xl p-6 md:p-10 w-full max-w-2xl"
        >
            <h1 class="text-3xl font-bold mb-6 text-center text-blue-700">
                Expense Tracker
            </h1>

            <!-- Budget & Expense Inputs -->
            <div class="flex flex-col md:flex-row gap-4 mb-8">
                <div class="flex-1">
                    <label
                        class="block text-gray-700 font-semibold mb-1"
                        for="budget"
                        >Monthly Budget</label
                    >
                    <div class="flex gap-2">
                        <input
                            type="number"
                            id="budget"
                            class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400"
                            placeholder="Budget"
                            min="0"
                        />
                        <button
                            onclick="setBudget()"
                            class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                        >
                            Set
                        </button>
                    </div>
                </div>
                <div class="flex-1">
                    <label
                        class="block text-gray-700 font-semibold mb-1"
                        for="expense-name"
                        >Expense</label
                    >
                    <div class="flex gap-2 mb-2">
                        <input
                            type="text"
                            id="expense-name"
                            class="w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400"
                            placeholder="Name"
                        />
                        <input
                            type="number"
                            id="expense-amount"
                            class="w-28 px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400"
                            placeholder="₹"
                            min="0"
                        />
                        <button
                            onclick="addExpense()"
                            class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
                        >
                            Add
                        </button>
                    </div>
                </div>
            </div>

            <!-- Insights Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <div class="bg-blue-100 rounded-lg p-4 text-center">
                    <div class="text-sm text-blue-700 font-semibold">
                        Budget
                    </div>
                    <div
                        id="total-budget"
                        class="text-xl font-bold text-blue-900"
                    >
                        ₹0
                    </div>
                </div>
                <div class="bg-red-100 rounded-lg p-4 text-center">
                    <div class="text-sm text-red-700 font-semibold">Spent</div>
                    <div
                        id="total-spent"
                        class="text-xl font-bold text-red-900"
                    >
                        ₹0
                    </div>
                </div>
                <div class="bg-green-100 rounded-lg p-4 text-center">
                    <div class="text-sm text-green-700 font-semibold">
                        Remaining
                    </div>
                    <div
                        id="remaining-budget"
                        class="text-xl font-bold text-green-900"
                    >
                        ₹0
                    </div>
                </div>
            </div>

            <!-- Expense Table -->
            <div class="overflow-x-auto mb-6">
                <table
                    class="min-w-full text-sm text-left border rounded-lg overflow-hidden"
                >
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="py-2 px-4 font-semibold text-gray-700">
                                #
                            </th>
                            <th class="py-2 px-4 font-semibold text-gray-700">
                                Name
                            </th>
                            <th class="py-2 px-4 font-semibold text-gray-700">
                                Amount (₹)
                            </th>
                            <th class="py-2 px-4 font-semibold text-gray-700">
                                Action
                            </th>
                        </tr>
                    </thead>
                    <tbody id="expense-table" class="bg-white">
                        <!-- Expenses will be injected here -->
                    </tbody>
                </table>
                <div id="no-expenses" class="text-center text-gray-400 py-4">
                    No expenses yet.
                </div>
            </div>

            <!-- Breakdown -->
            <div id="breakdown" class="text-gray-700"></div>
        </div>
        <script>
            let budget = 0;
            let expenses = [];

            function setBudget() {
                const input = document.getElementById("budget");
                budget = parseFloat(input.value) || 0;
                input.value = "";
                updateUI();
            }

            function addExpense() {
                const name = document
                    .getElementById("expense-name")
                    .value.trim();
                const amount =
                    parseFloat(
                        document.getElementById("expense-amount").value,
                    ) || 0;
                if (name && amount > 0) {
                    expenses.push({ name, amount });
                    document.getElementById("expense-name").value = "";
                    document.getElementById("expense-amount").value = "";
                    updateUI();
                }
            }

            function deleteExpense(idx) {
                expenses.splice(idx, 1);
                updateUI();
            }

            function updateUI() {
                // Budget Insights
                const totalSpent = expenses.reduce(
                    (sum, exp) => sum + exp.amount,
                    0,
                );
                document.getElementById("total-budget").textContent =
                    `₹${budget}`;
                document.getElementById("total-spent").textContent =
                    `₹${totalSpent}`;
                document.getElementById("remaining-budget").textContent =
                    `₹${budget - totalSpent}`;

                // Expense Table
                const table = document.getElementById("expense-table");
                table.innerHTML = "";
                if (expenses.length === 0) {
                    document.getElementById("no-expenses").style.display = "";
                } else {
                    document.getElementById("no-expenses").style.display =
                        "none";
                    expenses.forEach((exp, idx) => {
                        const tr = document.createElement("tr");
                        tr.className =
                            idx % 2 === 0 ? "bg-white" : "bg-gray-50";
                        tr.innerHTML = `
            <td class="py-2 px-4">${idx + 1}</td>
            <td class="py-2 px-4">${exp.name}</td>
            <td class="py-2 px-4 font-semibold text-gray-700">₹${exp.amount}</td>
            <td class="py-2 px-4">
              <button onclick="deleteExpense(${idx})" class="text-red-600 hover:underline">Delete</button>
            </td>
          `;
                        table.appendChild(tr);
                    });
                }

                // Breakdown
                let breakdownHTML = "";
                if (expenses.length > 0) {
                    const grouped = {};
                    expenses.forEach((exp) => {
                        grouped[exp.name] =
                            (grouped[exp.name] || 0) + exp.amount;
                    });
                    breakdownHTML =
                        '<div class="mt-2"><span class="font-semibold">Breakdown:</span><ul class="list-disc ml-6">';
                    for (const [name, amt] of Object.entries(grouped)) {
                        breakdownHTML += `<li>${name}: ₹${amt}</li>`;
                    }
                    breakdownHTML += "</ul></div>";
                }
                document.getElementById("breakdown").innerHTML = breakdownHTML;
            }
            // Initial UI
            updateUI();
        </script>
    </body>
</html>
